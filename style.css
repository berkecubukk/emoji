:root{
  --bg1:#ffecd2;
  --bg2:#fcb69f;
  --accent:#ffd700; /* pixel font color set to yellow */
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  /* pixel font for UI */
  font-family: 'Press Start 2P', monospace;
  /* Galactic gradient */
  background: radial-gradient(ellipse at bottom, #07102a 0%, #0f2747 30%, #2b0f6b 70%, #0b0226 100%);
  color:var(--accent);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
.star-layer{
  position:absolute;
  inset:0;
  pointer-events:none;
  background-repeat: repeat;
  mix-blend-mode: screen;
  will-change: background-position, opacity, transform;
}

/* Farthest (sparse, small, slow) */
.star-layer.layer-1{
  z-index: 1;
  background-image: radial-gradient(white 0.8px, transparent 0.9px);
  /* larger spacing and lower opacity to avoid heavy dotted appearance */
  background-size: 12px 12px;
  opacity: 0.18;
  animation: move-stars-slow 60s linear infinite;
}

/* Mid layer (medium density) */
.star-layer.layer-2{
  z-index: 2;
  background-image: radial-gradient(white 1.6px, transparent 1.8px);
  /* mid density, slightly larger spacing */
  background-size: 60px 60px;
  opacity: 0.12;
  animation: move-stars-med 40s linear infinite;
}

/* Foreground (denser, slightly larger, faster) */
.star-layer.layer-3{
  z-index: 3;
  background-image: radial-gradient(white 1.8px, transparent 2px);
  /* foreground stars are sparser now to avoid overlapping dots */
  background-size: 140px 140px;
  opacity: 0.06;
  animation: move-stars-fast 18s linear infinite;
}

/* subtle twinkle via opacity keyframe on pseudo-element for layer 3 */
.star-layer.layer-3::after{
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 20% 30%, rgba(255,255,255,0.12), transparent 6%),
              radial-gradient(circle at 80% 70%, rgba(255,255,255,0.1), transparent 6%);
  opacity: 0.0;
  animation: twinkle 6s ease-in-out infinite;
  pointer-events: none;
}

@keyframes move-stars-slow{ from { background-position: 0 0; } to { background-position: 0 10000px; } }
@keyframes move-stars-med{ from { background-position: 0 0; } to { background-position: 0 14000px; } }
@keyframes move-stars-fast{ from { background-position: 0 0; } to { background-position: 0 20000px; } }

@keyframes twinkle{ 0%{ opacity:0 } 40%{ opacity:0.8 } 70%{ opacity:0.2 } 100%{ opacity:0 } }

/* Level themes (different backgrounds applied to #game) */
.app{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:4vh 2vw;
}
.hud{
  width:90vw;
  max-width:640px;
  display:flex;
  justify-content:space-between;
  margin-bottom:1vh;
  font-weight:600;
}
/* Make HUD items use pixel font and consistent color/size */
.hud > *{ font-family: 'Press Start 2P', monospace; color:var(--accent); font-size:10px; display:flex; align-items:center; gap:6px; }
#game-container{
  width:90vw;
  max-width:640px;
  height:75vh;
  max-height:900px;
  position:relative;
  background:transparent;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 8px 30px rgba(5,5,15,0.4);
}
#game{
  position:absolute;
  inset:0;
  overflow:hidden;
  /* space background with two star layers for depth */
  background: radial-gradient(ellipse at center, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0) 40%), linear-gradient(180deg,#0b1228 0%, #0b0830 60%);
}

#game::before,
#game::after{
  content:'';
  position:absolute;
  inset:0;
  pointer-events:none;
}

/* Level themes (different backgrounds applied to #game) */
#game.level-1 { background: radial-gradient(ellipse at center, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0) 40%), linear-gradient(180deg,#0b1228 0%, #0b0830 60%); }
#game.level-1 { background: radial-gradient(ellipse at center, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0) 40%), linear-gradient(180deg,#0b1228 0%, #0b0830 60%); }
#game.level-2 { background: radial-gradient(circle at 30% 20%, rgba(200,220,255,0.03), transparent 10%), linear-gradient(180deg,#071a42 0%, #2b0f6b 60%); }
#game.level-3 { background: radial-gradient(circle at 60% 30%, rgba(255,230,200,0.02), transparent 8%), linear-gradient(180deg,#1b0033 0%, #12002a 60%); }
#game.level-4 { background: radial-gradient(circle at 50% 10%, rgba(200,255,230,0.02), transparent 8%), linear-gradient(180deg,#002238 0%, #001022 60%); }
#game.level-5 { background: radial-gradient(circle at 40% 40%, rgba(255,200,255,0.02), transparent 12%), linear-gradient(180deg,#200030 0%, #10001a 60%); }
#game.level-6 { background: radial-gradient(circle at 70% 20%, rgba(200,255,200,0.03), transparent 15%), linear-gradient(180deg,#001a1a 0%, #000d0d 60%); }
#game.level-7 { background: radial-gradient(circle at 20% 60%, rgba(255,220,180,0.02), transparent 10%), linear-gradient(180deg,#1a0d00 0%, #0d0600 60%); }
#game.level-8 { background: radial-gradient(circle at 45% 45%, rgba(180,220,255,0.03), transparent 18%), linear-gradient(180deg,#000d1a 0%, #00060d 60%); }
#game.level-9 { background: radial-gradient(circle at 55% 35%, rgba(255,180,255,0.02), transparent 12%), linear-gradient(180deg,#1a001a 0%, #0d000d 60%); }
#game.level-10 { background: radial-gradient(circle at 30% 70%, rgba(255,255,180,0.03), transparent 15%), linear-gradient(180deg,#1a1a00 0%, #0d0d00 60%); }

/* HUD level */
#level{ font-size:10px; font-weight:700; color:var(--accent); text-shadow:0 1px 0 rgba(0,0,0,0.6); }

/* Start screen controls */
.row{ margin:8px 0; }
.chars{ display:flex; gap:8px; justify-content:center; }
.char-btn{ padding:8px 10px; border-radius:6px; border:2px solid rgba(255,255,255,0.06); background:rgba(255,255,255,0.02); cursor:pointer; font-size:20px; }
.char-btn.selected{ outline:3px solid rgba(120,200,255,0.12); box-shadow:0 6px 18px rgba(0,0,0,0.4); }
.difs{ display:flex; gap:8px; justify-content:center; align-items:center; }
.difs label{ font-size:10px; cursor:pointer; }

/* Shielded player visual */
.shielded{ text-shadow: 0 6px 16px rgba(0,255,200,0.45), 0 0 28px rgba(0,200,255,0.35); transform: translateY(-2px) scale(1.02); }
/* Toned down the pseudo-element star layers â€” these used to add dense dots when combined with the star-layer divs.
   Keeping faint, large stars here for depth but with much lower opacity and bigger spacing. */
#game::before{
  /* subtle distant stars */
  background-image: radial-gradient(white 1px, transparent 1px);
  background-size: 6px 6px;
  opacity:0.06;
  mix-blend-mode:screen;
  transform:translateZ(0);
}
#game::after{
  /* faint large stars for depth */
  background-image: radial-gradient(white 1.6px, transparent 1.6px);
  background-size: 80px 80px;
  opacity:0.08;
  mix-blend-mode:screen;
}
#player{
  position:absolute;
  bottom:3vh;
  left:0;
  transform:translateX(0);
  font-size:6.5vh;
  width:6.5vh;
  height:6.5vh;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  user-select:none;
  will-change:transform;
  text-shadow: 0 6px 16px rgba(0,0,0,0.6), 0 0 20px rgba(120,180,255,0.12);
  /* Ensure color emoji fonts are used so special glyphs like ðŸ›¸ render */
  font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Segoe UI Symbol", sans-serif;
}
.player-inner{ display:inline-flex; align-items:center; justify-content:center; width:100%; height:100%; font-size:5.2vh; }
.falling{
  position:absolute;
  top: -10vh;
  width:6vh;
  height:6vh;
  font-size:4.5vh;
  line-height:1;
  display:flex;
  align-items:center;
  justify-content:center;
  will-change:transform;
  pointer-events:none;
  transition:transform 80ms linear;
  /* use emoji fonts for falling items too */
  font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Segoe UI Symbol", sans-serif;
  -webkit-font-smoothing:antialiased;
}
.falling.harmful{ filter: drop-shadow(0 6px 8px rgba(200,40,40,0.15)); }
.falling.benefit{ filter: drop-shadow(0 6px 8px rgba(80,200,120,0.12)); }
.overlay{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:1rem;
  background:linear-gradient(180deg, rgba(255,255,255,0.4), rgba(255,255,255,0.15));
  text-align:center;
  padding:2rem;
}

/* HUD health bar */
#health{ display:flex; align-items:center; gap:0.6rem; }
#health-bar-wrap{ width:110px; height:12px; background:rgba(255,255,255,0.08); border-radius:8px; overflow:hidden; box-shadow:inset 0 -2px 6px rgba(0,0,0,0.4); }
#health-bar{ height:100%; width:100%; background:linear-gradient(90deg,#1affc4,#3ad7ff); transform-origin:left; }
#health-text{ font-weight:700; font-size:0.9rem; color:#fff; text-shadow:0 1px 2px rgba(0,0,0,0.6); }

/* flash when hit */
.hit-effect{
  box-shadow: 0 0 0 9999px rgba(255,60,60,0.06) inset;
}

/* shield visuals */
#player .shield-effect {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 200%;
  height: 200%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  opacity: 0;
  pointer-events: none;
  transition: opacity 300ms ease-out;
}

#player.shielded .shield-effect {
  opacity: 1;
  box-shadow: 0 0 25px rgba(80,220,255,0.85),
              0 0 50px rgba(80,220,255,0.25) inset;
  animation: shield-pulse 1.5s infinite;
}

@keyframes shield-pulse {
  0% { transform: translate(-50%, -50%) scale(0.95); }
  50% { transform: translate(-50%, -50%) scale(1.05); }
  100% { transform: translate(-50%, -50%) scale(0.95); }
}

/* Level transition effect */
.level-transition {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
  color: var(--accent);
  text-shadow: 0 0 20px var(--accent);
  opacity: 0;
  animation: level-appear 1.5s ease-out forwards;
  pointer-events: none;
}

@keyframes level-appear {
  0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
  20% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
  80% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(1.2); opacity: 0; }
}

/* brief pop when gained/lost - animate inner element only so parent translateX isn't overwritten */
.player-inner.player-pop{ animation: pop 420ms ease-out; }
@keyframes pop{ 0%{ transform: scale(0.9); } 60%{ transform: scale(1.12); } 100%{ transform: scale(1); } }
.player-inner.player-lost{ animation: lost 560ms ease-out; box-shadow:0 0 18px rgba(255,80,80,0.8) inset; }
@keyframes lost{ 0%{ opacity:1; transform: scale(1); } 100%{ opacity:0.9; transform: translateY(-6px) scale(0.98); } }

/* HUD pause button and shield timer */
#pause-btn{ background:rgba(255,255,255,0.06); color:var(--accent); border:1px solid rgba(255,255,255,0.06); padding:6px 8px; font-size:10px; margin-left:8px; }
#shield-timer{ font-size:11px; color:var(--accent); padding-left:6px; }

/* center transient message */
.center-msg{
  position:absolute;
  left:50%;
  top:48%;
  transform:translate(-50%,-50%);
  pointer-events:none;
  color:rgba(255,255,255,0.95);
  font-size:18px;
  text-align:center;
  padding:8px 14px;
  border-radius:8px;
  background: rgba(0,0,0,0.14);
  backdrop-filter: blur(4px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.45);
}
.center-msg.hidden{ display:none }
.overlay.hidden{display:none}
button{
  padding:0.6rem 1.2rem;
  font-size:1rem;
  border-radius:8px;
  border:none;
  cursor:pointer;
  background:#232323;
  color:white;
}
.hint{font-size:0.8rem;color:#333}

@media (min-width:900px){
  #player{font-size:4.5vh}
  .falling{font-size:4vh}
}
